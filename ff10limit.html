<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>FF10 技の名前いえるかな</title>
    <style>
        /* FF10 メニュー風背景：スピラの海をイメージしたブルーグラデーション */
        body { 
            font-family: 'Helvetica Neue', Arial, "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
            text-align: center; 
            padding: 20px; 
            background: linear-gradient(135deg, #003366 0%, #006699 50%, #002244 100%);
            background-attachment: fixed;
            color: #ffffff; 
            margin: 0; 
        }

        /* FF10 ウィンドウ風：透過ブルーと白い細枠 */
        .container { 
            max-width: 1500px; 
            margin: 20px auto; 
            background: rgba(0, 40, 80, 0.7); 
            padding: 30px; 
            border-radius: 20px; 
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 20px rgba(0,0,0,0.5), inset 0 0 15px rgba(255,255,255,0.1);
            backdrop-filter: blur(5px);
        }

        /* ヘッダー部分 */
        .sticky-header { 
            position: sticky; 
            top: 0; 
            background: rgba(0, 20, 50, 0.9); 
            padding: 20px 0; 
            z-index: 100; 
            border-bottom: 2px solid rgba(255, 255, 255, 0.5); 
            margin-bottom: 25px; 
            border-radius: 15px 15px 0 0;
        }

        h2 { 
            margin: 0; 
            color: #ffffff; 
            font-size: 1.8em;
            letter-spacing: 3px;
            text-shadow: 0 0 10px #00ffff; 
        }

        /* FF10 オーバードライブゲージ風 */
        .limit-gauge-outer {
            max-width: 500px;
            margin: 20px auto;
            padding: 2px;
            background: rgba(0,0,0,0.5); 
            border: 1px solid #fff;
            border-radius: 4px;
            position: relative;
        }

        .limit-gauge-bg {
            height: 12px;
            background: #111;
            overflow: hidden;
            position: relative;
        }

        #limitFill {
            height: 100%;
            width: 0%;
            /* FF10のゲージ：イエローからホワイトへの眩い光 */
            background: linear-gradient(to right, #ccaa00, #ffff00 80%, #ffffff 100%);
            box-shadow: 0 0 15px #ffff00;
            transition: width 0.4s ease-out;
        }

        .limit-label {
            position: absolute;
            right: 10px;
            top: -20px;
            font-size: 12px;
            font-weight: bold;
            color: #00ffff;
            text-shadow: 1px 1px 2px #000;
        }

        /* MAX時の点滅：オーバードライブ準備完了風 */
        @keyframes overdrive-flash {
            0% { filter: brightness(1); }
            50% { filter: brightness(2); opacity: 0.8; }
            100% { filter: brightness(1); }
        }

        .limit-max #limitFill {
            background: linear-gradient(to right, #ffffff, #00ffff, #ffffff);
            animation: overdrive-flash 0.5s infinite;
        }

        .status { margin: 15px 0; font-size: 1.1em; color: #00ffff; font-style: italic; }
        #message { height: 26px; font-weight: bold; margin-bottom: 10px; color: #fff; text-shadow: 0 0 5px #00ffff; }

        input { 
            font-size: 18px; 
            padding: 10px 20px; 
            width: 40%; 
            border: 1px solid #00ffff; 
            border-radius: 30px; 
            background: rgba(0, 0, 0, 0.4); 
            color: #fff; 
            outline: none;
            transition: 0.3s;
        }
        input:focus { background: rgba(0, 80, 150, 0.6); box-shadow: 0 0 15px #00ffff; }

        .btn { 
            padding: 10px 25px; 
            font-size: 14px; 
            cursor: pointer; 
            border-radius: 20px; 
            border: 1px solid #fff; 
            background: rgba(255, 255, 255, 0.1); 
            color: #fff; 
            transition: 0.3s; 
        }
        .btn:hover { background: #fff; color: #003366; }

        /* リスト部分：クリアパネル風 */
        .list { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); 
            gap: 12px; 
            margin-top: 30px; 
        }

        .item { 
            padding: 15px; 
            background: rgba(255, 255, 255, 0.05); 
            border-left: 4px solid rgba(0, 255, 255, 0.3);
            border-radius: 4px;
            color: rgba(255, 255, 255, 0.4); 
            transition: 0.5s;
            text-align: left;
            padding-left: 20px;
        }

        .item.found { 
            background: rgba(0, 255, 255, 0.15); 
            color: #ffffff; 
            border-left: 4px solid #00ffff;
            box-shadow: -5px 0 15px rgba(0, 255, 255, 0.2);
        }

        .hint-text { font-size: 0.75em; color: #00ffff; margin-bottom: 4px; letter-spacing: 1px; }
.answer-text { 
            font-size: 1.1em; 
            letter-spacing: 1px; 
            font-weight: bold; /* 太字に変更 */
        }
        .item.missed { background: rgba(255, 0, 0, 0.2); border-left-color: #ff0000; }
        .item.missed .answer-text { color: #ff8888; }
    </style>
</head>
<body>

<div class="container">
    <div class="sticky-header">
        <h2>FF10 技の名前いえるかな</h2>
        <div class="limit-gauge-outer" id="gaugeWrapper">
            <div class="limit-label" id="progressPercent">0%</div> 
            <div class="limit-gauge-bg">
                <div id="limitFill"></div>
            </div>
        </div>
        <div class="status">あと: <span id="remaining">--</span> / <span id="total">--</span></div>
        <div id="message"></div>
        <input type="text" id="answerInput" placeholder="COMMAND NAME..." autofocus autocomplete="off">
        <button class="btn giveup-btn" id="giveupBtn">ギブアップ</button>
        <button class="btn retry-btn" id="retryBtn" style="display:none;">リトライ</button>
    </div>
    <div class="list" id="answerList"></div>
</div>

<script>
    const config = {
        placeholderNormal: "技名を入力してEnter",
        placeholderGameOver: "FINISH",
        storageKey: "quiz_save_" + document.title
    };

const quizData = [
        // ティーダ・剣技
        { display: "スパイラルカット", accept: ["スパイラルカット", "すぱいらるかっと"], hint: "ティーダ・剣技" },
        { display: "チャージ＆アサルト", accept: ["チャージ＆アサルト", "ちゃーじあんどあさると", "ちゃーじあさると", "チャージアンドアサルト"], hint: "ティーダ・剣技" },
        { display: "エナジーレイン", accept: ["エナジーレイン", "えなじーれいん"], hint: "ティーダ・剣技" },
        { display: "エース・オブ・ザ・ブリッツ", accept: ["エース・オブ・ザ・ブリッツ", "えーすおぶざぶりっつ"], hint: "ティーダ・剣技" },

        // ワッカ・スロット
        { display: "エレメントリール", accept: ["エレメントリール", "えれめんとりーる"], hint: "ワッカ・スロット" },
        { display: "アタックリール", accept: ["アタックリール", "あたっくりーる"], hint: "ワッカ・スロット" },
        { display: "ステータスリール", accept: ["ステータスリール", "すてーたすりーる"], hint: "ワッカ・スロット" },
        { display: "オーラカリール", accept: ["オーラカリール", "おーらかりーる"], hint: "ワッカ・スロット" },

        // アーロン・秘伝
        { display: "牙龍", accept: ["牙龍", "がりゅう"], hint: "アーロン・秘伝" },
        { display: "流星", accept: ["流星", "りゅうせい"], hint: "アーロン・秘伝" },
        { display: "征伐", accept: ["征伐", "せいばつ"], hint: "アーロン・秘伝" },
        { display: "陣風", accept: ["陣風", "じんぷう"], hint: "アーロン・秘伝" },

        // キマリ・敵の技
        { display: "ジャンプ", accept: ["ジャンプ", "じゃんぷ"], hint: "キマリ・敵の技" },
        { display: "火炎", accept: ["火炎", "かえん"], hint: "キマリ・敵の技" },
        { display: "タネ大砲", accept: ["タネ大砲", "たねたいほう"], hint: "キマリ・敵の技" },
        { display: "自爆", accept: ["自爆", "じばく"], hint: "キマリ・敵の技" },
        { display: "回しげり", accept: ["回しげり", "まわしげり"], hint: "キマリ・敵の技" },
        { display: "石化ブレス", accept: ["石化ブレス", "せきかぶれす"], hint: "キマリ・敵の技" },
        { display: "アクアブレス", accept: ["アクアブレス", "あくあぶれす"], hint: "キマリ・敵の技" },
        { display: "死の宣告", accept: ["死の宣告", "しのせんこく"], hint: "キマリ・敵の技" },
        { display: "ホワイトウィンド", accept: ["ホワイトウィンド", "ほわいとうぃんど"], hint: "キマリ・敵の技" },
        { display: "くさい息", accept: ["くさい息", "くさいいき"], hint: "キマリ・敵の技" },
        { display: "マイティガード", accept: ["マイティガード", "まいてぃがーど"], hint: "キマリ・敵の技" },
        { display: "サンシャイン", accept: ["サンシャイン", "さんしゃいん"], hint: "キマリ・敵の技" },

        // 共通技
        { display: "スリプルアタック", accept: ["スリプルアタック", "すりぷるあたっく"], hint: "共通技" },
        { display: "サイレスアタック", accept: ["サイレスアタック", "さいれすあたっく"], hint: "共通技" },
        { display: "ブラインアタック", accept: ["ブラインアタック", "ぶらいんあたっく"], hint: "共通技" },
        { display: "スリプルバスター", accept: ["スリプルバスター", "すりぷるばすたー"], hint: "共通技" },
        { display: "サイレスバスター", accept: ["サイレスバスター", "さいれすばすたー"], hint: "共通技" },
        { display: "ブラインバスター", accept: ["ブラインバスター", "ぶらいんばすたー"], hint: "共通技" },
        { display: "ゾンビアタック", accept: ["ゾンビアタック", "ぞんびあたっく"], hint: "共通技" },
        { display: "ペナルティ3", accept: ["ペナルティ3", "ぺなるてぃ3", "ぺなるてぃすりー"], hint: "共通技" },
        { display: "ディレイアタック", accept: ["ディレイアタック", "でぃれいあたっく"], hint: "共通技" },
        { display: "ディレイバスター", accept: ["ディレイバスター", "でぃれいばすたー"], hint: "共通技" },
        { display: "パワーブレイク", accept: ["パワーブレイク", "ぱわーぶれいく"], hint: "共通技" },
        { display: "マジックブレイク", accept: ["マジックブレイク", "まじっくぶれいく"], hint: "共通技" },
        { display: "アーマーブレイク", accept: ["アーマーブレイク", "あーまーぶれいく"], hint: "共通技" },
        { display: "メンタルブレイク", accept: ["メンタルブレイク", "めんたるぶれいく"], hint: "共通技" },
        { display: "ぶんどる", accept: ["ぶんどる"], hint: "共通技" },
        { display: "クイックトリック", accept: ["クイックトリック", "くいっくとりっく"], hint: "共通技" },
        { display: "パワーアタック", accept: ["パワーアタック", "ぱわーあたっく"], hint: "共通技" },
        { display: "マジックアタック", accept: ["マジックアタック", "まじっくあたっく"], hint: "共通技" },
        { display: "スピードアタック", accept: ["スピードアタック", "すぴーどあたっく"], hint: "共通技" },
        { display: "アビリティアタック", accept: ["アビリティアタック", "あびりてぃあたっく"], hint: "共通技" },
        { display: "フルブレイク", accept: ["フルブレイク", "ふるぶれいく"], hint: "共通技" },
        { display: "まきあげる", accept: ["まきあげる"], hint: "共通技" },

        // ヴァルファーレ
        { display: "ソニックウィング", accept: ["ソニックウィング", "そにっくういんぐ"], hint: "ヴァルファーレ" },
        { display: "シューティング・レイ", accept: ["シューティング・レイ", "しゅーてぃんぐれい"], hint: "ヴァルファーレ" },
        { display: "シューティング・パワー", accept: ["シューティング・パワー", "しゅーてぃんぐぱわー"], hint: "ヴァルファーレ" },

        // イフリート
        { display: "メテオストライク", accept: ["メテオストライク", "めておすとらいく"], hint: "イフリート" },
        { display: "地獄の火炎", accept: ["地獄の火炎", "じごくのかえん"], hint: "イフリート" },

        // イクシオン
        { display: "エアロスパーク", accept: ["エアロスパーク", "えあろすぱーく"], hint: "イクシオン" },
        { display: "トールハンマー", accept: ["トールハンマー", "とーるはんまー"], hint: "イクシオン" },

        // シヴァ
        { display: "天からの一撃", accept: ["天からの一撃", "てんからのいちげき"], hint: "シヴァ" },
        { display: "ダイアモンドダスト", accept: ["ダイアモンドダスト", "だいあもんどだすと"], hint: "シヴァ" },

        // バハムート
        { display: "インパルス", accept: ["インパルス", "いんぱるす"], hint: "バハムート" },
        { display: "メガフレア", accept: ["メガフレア", "めがふれあ"], hint: "バハムート" },

        // ようじんぼう
        { display: "ダイゴロウ", accept: ["ダイゴロウ", "だいごろう"], hint: "ようじんぼう" },
        { display: "小柄", accept: ["小柄", "こづか"], hint: "ようじんぼう" },
        { display: "脇差", accept: ["脇差", "わきざし"], hint: "ようじんぼう" },
        { display: "斬魔刀", accept: ["斬魔刀", "ざんまとう"], hint: "ようじんぼう" },

        // アニマ
        { display: "ペイン", accept: ["ペイン", "ぺいん"], hint: "アニマ" },
        { display: "カオティック・D", accept: ["カオティック・D", "かおてぃっくでぃー", "カオティックD"], hint: "アニマ" },

        // メーガス三姉妹
        { display: "アングルティール", accept: ["アングルティール", "あんぐるてぃーる"], hint: "メーガス三姉妹" },
        { display: "シュメルツェンド", accept: ["シュメルツェンド", "しゅめるつぇんど"], hint: "メーガス三姉妹" },
        { display: "リトルナーレ", accept: ["リトルナーレ", "りとるなーれ"], hint: "メーガス三姉妹" },
        { display: "デルタアタック", accept: ["デルタアタック", "でるたあたっく"], hint: "メーガス三姉妹" },
    ];

    let foundCount = 0;
    let isGameOver = false;
    let answeredIndices = new Set();

    const input = document.getElementById('answerInput');
    const remainingText = document.getElementById('remaining');
    const totalText = document.getElementById('total');
    const listContainer = document.getElementById('answerList');
    const messageEl = document.getElementById('message');
    const giveupBtn = document.getElementById('giveupBtn');
    const retryBtn = document.getElementById('retryBtn');
    const limitFill = document.getElementById('limitFill');
    const gaugeWrapper = document.getElementById('gaugeWrapper');
    const percentDisplay = document.getElementById('progressPercent');

    function updateLimitGauge() {
        const percent = Math.floor((foundCount / quizData.length) * 100);
        if(limitFill) limitFill.style.width = percent + "%";
        if(percentDisplay) {
            percentDisplay.textContent = (foundCount === quizData.length) ? "OVERDRIVE !!" : percent + "%";
        }
        if (foundCount === quizData.length && quizData.length > 0) {
            gaugeWrapper.classList.add('limit-max');
        } else {
            gaugeWrapper.classList.remove('limit-max');
        }
    }

    function init() {
        foundCount = 0;
        isGameOver = false;
        answeredIndices.clear();
        listContainer.innerHTML = '';
        input.disabled = false;
        input.value = '';
        input.placeholder = config.placeholderNormal;
        giveupBtn.style.display = 'inline-block';
        retryBtn.style.display = 'none';
        remainingText.textContent = quizData.length;
        totalText.textContent = quizData.length;
        messageEl.textContent = '';

        quizData.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = 'item';
            div.id = 'target-' + index;
            div.innerHTML = `<div class="hint-text">${item.hint}</div><div class="answer-text">？？？？</div>`;
            listContainer.appendChild(div);
        });

        loadProgress();
        updateLimitGauge();
    }

    function loadProgress() {
        const savedData = localStorage.getItem(config.storageKey);
        if (savedData) {
            const savedIndices = JSON.parse(savedData);
            savedIndices.forEach(index => {
                if (index < quizData.length) {
                    answeredIndices.add(index);
                    updateItemDisplay(index, true, false); // ロード時はスクロールさせない
                    foundCount++;
                }
            });
            remainingText.textContent = quizData.length - foundCount;
            if (foundCount > 0) showMessage("DATA LOADED", "#00ffff");
            if (foundCount === quizData.length) finishGame("ALL CLEAR!", "#ffffff");
        }
        updateLimitGauge();
    }

    function saveProgress() {
        localStorage.setItem(config.storageKey, JSON.stringify(Array.from(answeredIndices)));
    }

    input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && !isGameOver) {
            const val = input.value.trim();
            if (val === "") return;
            let targetIndex = quizData.findIndex(item => item.accept.includes(val));

            if (targetIndex !== -1) {
                if (answeredIndices.has(targetIndex)) {
                    showMessage("ALREADY ANSWERED", "#ffffff");
                    document.getElementById('target-' + targetIndex).scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                } else {
                    answeredIndices.add(targetIndex);
                    updateItemDisplay(targetIndex, true, true); 
                    foundCount++;
                    remainingText.textContent = quizData.length - foundCount;
                    showMessage("EXCELLENT!", "#ffffff");
                    saveProgress();
                    updateLimitGauge();
                    if (foundCount === quizData.length) finishGame("OVERDRIVE!", "#ffffff");
                }
            } else {
                showMessage("MISS", "#ff5252");
            }
            input.value = '';
        }
    });

    function updateItemDisplay(index, isCorrect, shouldScroll) {
        const targetEl = document.getElementById('target-' + index);
        const data = quizData[index];
        targetEl.innerHTML = `
            <div class="hint-text">${data.hint}</div>
            <div class="answer-text">${data.display}</div>
        `;
        
        if (isCorrect) {
            targetEl.classList.add('found');
            if(shouldScroll) {
                targetEl.scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
            }
        } else {
            targetEl.classList.add('missed');
        }
    }

    giveupBtn.addEventListener('click', () => {
        quizData.forEach((item, index) => { if (!answeredIndices.has(index)) updateItemDisplay(index, false, false); });
        finishGame("GAME OVER", "#ffffff");
    });

    retryBtn.addEventListener('click', () => {
        if(confirm("進行状況をリセットしますか？")) { localStorage.removeItem(config.storageKey); init(); }
    });

    function finishGame(msg, color) {
        isGameOver = true;
        input.disabled = true;
        input.placeholder = config.placeholderGameOver;
        giveupBtn.style.display = 'none';
        retryBtn.style.display = 'inline-block';
        showMessage(msg, color);
        updateLimitGauge();
    }

    function showMessage(text, color) {
        messageEl.textContent = text;
        messageEl.style.color = color;
        if (!isGameOver) setTimeout(() => { if (messageEl.textContent === text) messageEl.textContent = ""; }, 1500);
    }

    init();
</script>

</body>
</html>