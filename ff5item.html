<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>FF5 アイテムいえるかな</title>
    <style>
        /* FF5 ブルーウィンドウ再現 */
        :root {
            --ff-blue: linear-gradient(to bottom, #0000ad 0%, #00004a 100%);
            --ff-border: #ffffff;
        }

        body {
            font-family: 'MS Gothic', 'Courier New', monospace;
            text-align: center;
            background-color: #000;
            color: white;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--ff-blue);
            padding: 15px;
            border-radius: 8px;
            border: 3px solid var(--ff-border);
            box-shadow: inset 0 0 0 2px #000, 5px 5px 15px rgba(0,0,0,0.8);
        }

        .sticky-header {
            position: sticky;
            top: 0;
            background: rgba(0, 0, 100, 0.95);
            padding: 15px 0;
            z-index: 100;
            border-bottom: 2px solid rgba(255,255,255,0.3);
            margin-bottom: 20px;
        }

        h2 {
            margin: 0 0 15px 0;
            font-size: 24px;
            letter-spacing: 2px;
            text-shadow: 2px 2px 0px #000;
        }

        /* ゲージと％を横並びにするレイアウト */
        .gauge-flex-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            max-width: 500px;
            margin: 10px auto;
        }

        .limit-gauge-outer {
            flex-grow: 1;
            padding: 2px;
            background: #444;
            border: 2px solid #888;
        }

        .limit-gauge-bg {
            height: 18px;
            background: #222;
            position: relative;
            overflow: hidden;
        }

        #limitFill {
            height: 100%;
            width: 0%;
            background: linear-gradient(to bottom, #ffff00 0%, #ff8800 100%);
            transition: width 0.3s linear;
        }

        .limit-label {
            font-size: 18px;
            font-weight: bold;
            color: #fff;
            text-shadow: 2px 2px 0 #000;
            min-width: 80px;
            text-align: left;
        }

        .status {
            font-size: 1.1em;
            margin: 10px 0;
            color: #ffff00;
            text-shadow: 1px 1px 0 #000;
        }

        #message { height: 24px; margin-bottom: 10px; font-weight: bold; }

        input {
            font-size: 18px;
            padding: 8px;
            width: 50%;
            background: #000;
            color: #fff;
            border: 2px solid #fff;
            outline: none;
            margin-bottom: 10px;
        }

        .btn {
            padding: 8px 15px;
            background: #000080;
            color: #fff;
            border: 2px solid #fff;
            cursor: pointer;
            font-family: inherit;
        }

        .btn:hover { background: #0000ff; }

        .list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
            gap: 10px;
        }

        .item {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 10px 5px;
            min-height: 50px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .item.found {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid #ffff00;
            box-shadow: inset 0 0 8px rgba(255, 255, 0, 0.5);
        }

        .hint-text {
            color: #00ffff;
            font-size: 12px;
            margin-bottom: 4px;
            text-shadow: 1px 1px 0 #000;
        }

        .answer-text {
            font-size: 15px;
            color: #fff;
            font-weight: bold;
        }

        .item.missed .answer-text {
            color: #ff4444;
        }

        @keyframes flash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .limit-max #limitFill {
            background: #fff !important;
            box-shadow: 0 0 10px #fff;
            animation: flash 0.1s infinite;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="sticky-header">
        <h2>FF5 アイテムいえるかな</h2>
        
        <div class="gauge-flex-container" id="gaugeWrapper">
            <div class="limit-gauge-outer">
                <div class="limit-gauge-bg">
                    <div id="limitFill"></div>
                </div>
            </div>
            <div class="limit-label" id="progressPercent">0%</div> 
        </div>

        <div class="status">のこり: <span id="remaining">--</span> / <span id="total">--</span></div>
        <div id="message"></div>
        <input type="text" id="answerInput" placeholder="なまえを いれてください" autofocus autocomplete="off">
        <button class="btn giveup-btn" id="giveupBtn">ギブアップ</button>
        <button class="btn retry-btn" id="retryBtn" style="display:none;">もういちど</button>
    </div>
    <div class="list" id="answerList"></div>
</div>

<script>
    const config = {
        placeholderNormal: "なまえを いれてください",
        placeholderGameOver: "GAME OVER",
        storageKey: "quiz_save_" + document.title
    };

const quizData = [
        // 短剣
        { display: "ナイフ", accept: ["ナイフ", "ないふ"], hint: "短剣" },
        { display: "ダガー", accept: ["ダガー", "だがー"], hint: "短剣" },
        { display: "ミスリルナイフ", accept: ["ミスリルナイフ", "みすりるないふ"], hint: "短剣" },
        { display: "メイジマッシャー", accept: ["メイジマッシャー", "めいじまっしゃー"], hint: "短剣" },
        { display: "マインゴーシュ", accept: ["マインゴーシュ", "まいんごーしゅ"], hint: "短剣" },
        { display: "オリハルコン", accept: ["オリハルコン", "おりはるこん"], hint: "短剣" },
        { display: "ダンシングダガー", accept: ["ダンシングダガー", "だんしんぐだがー"], hint: "短剣" },
        { display: "エアナイフ", accept: ["エアナイフ", "えあないふ"], hint: "短剣" },
        { display: "盗賊のナイフ", accept: ["盗賊のナイフ", "とうぞくのないふ"], hint: "短剣" },
        { display: "アサシンダガー", accept: ["アサシンダガー", "あさしんだがー"], hint: "短剣" },
        { display: "マンイーター", accept: ["マンイーター", "まんいーたー"], hint: "短剣" },
        { display: "チキンナイフ", accept: ["チキンナイフ", "ちきんないふ"], hint: "短剣" },

        // 忍者刀
        { display: "くない", accept: ["くない", "クナイ"], hint: "忍者刀" },
        { display: "小太刀", accept: ["小太刀", "こだち"], hint: "忍者刀" },
        { display: "佐助の刀", accept: ["佐助の刀", "さすけのかたな"], hint: "忍者刀" },

        // 剣
        { display: "ブロードソード", accept: ["ブロードソード", "ぶろーどそーど"], hint: "剣" },
        { display: "ロングソード", accept: ["ロングソード", "ろんぐそーど"], hint: "剣" },
        { display: "ミスリルソード", accept: ["ミスリルソード", "みすりるそーど"], hint: "剣" },
        { display: "珊瑚の剣", accept: ["珊瑚の剣", "さんごのつるぎ"], hint: "剣" },
        { display: "古代の剣", accept: ["古代の剣", "こだいのつるぎ"], hint: "剣" },
        { display: "眠りの剣", accept: ["眠りの剣", "ねむりのつるぎ"], hint: "剣" },
        { display: "ルーンブレイド", accept: ["ルーンブレイド", "るーんぶれいど"], hint: "剣" },
        { display: "グレートソード", accept: ["グレートソード", "ぐれーとそーど"], hint: "剣" },
        { display: "エンハンスソード", accept: ["エンハンスソード", "えんはんすそーど"], hint: "剣" },
        { display: "エクスカリパー", accept: ["エクスカリパー", "えくすかりぱー"], hint: "剣" },

        // 騎士剣
        { display: "フレイムタン", accept: ["フレイムタン", "ふれいむたん"], hint: "騎士剣" },
        { display: "アイスブランド", accept: ["アイスブランド", "あいすぶらんど"], hint: "騎士剣" },
        { display: "ブラッドソード", accept: ["ブラッドソード", "ぶらっどそーど"], hint: "騎士剣" },
        { display: "ディフェンダー", accept: ["ディフェンダー", "でぃふぇんだー"], hint: "騎士剣" },
        { display: "エクスカリバー", accept: ["エクスカリバー", "えくすかりばー"], hint: "騎士剣" },
        { display: "ラグナロク", accept: ["ラグナロク", "らぐなろく"], hint: "騎士剣" },
        { display: "ブレイブブレイド", accept: ["ブレイブブレイド", "ぶれいぶぶれいど"], hint: "騎士剣" },

        // 槍
        { display: "スピア", accept: ["スピア", "すぴあ"], hint: "槍" },
        { display: "ミスリルスピア", accept: ["ミスリルスピア", "みすりるすぴあ"], hint: "槍" },
        { display: "トライデント", accept: ["トライデント", "とらいでんと"], hint: "槍" },
        { display: "ウィンドスピア", accept: ["ウィンドスピア", "ういんどすぴあ"], hint: "槍" },
        { display: "ヘヴィランス", accept: ["ヘヴィランス", "へゔぃらんす", "へヴィランス"], hint: "槍" },
        { display: "ジャベリン", accept: ["ジャベリン", "じゃべりん"], hint: "槍" },
        { display: "パルチザン", accept: ["パルチザン", "ぱるちざん"], hint: "槍" },
        { display: "ホーリーランス", accept: ["ホーリーランス", "ほーりーらんす"], hint: "槍" },
        { display: "飛竜の槍", accept: ["飛竜の槍", "ひりゅうのやり"], hint: "槍" },

        // 斧
        { display: "バトルアクス", accept: ["バトルアクス", "ばとるあくす"], hint: "斧" },
        { display: "オーガキラー", accept: ["オーガキラー", "おーがきらー"], hint: "斧" },
        { display: "デスシックル", accept: ["デスシックル", "ですしっくる"], hint: "斧" },
        { display: "ポイズンアクス", accept: ["ポイズンアクス", "ぽいずんあくす"], hint: "斧" },
        { display: "ルーンアクス", accept: ["ルーンアクス", "るーんあくす"], hint: "斧" },
        { display: "巨人の斧", accept: ["巨人の斧", "きょじんのおの"], hint: "斧" },

        // ハンマー
        { display: "ミスリルハンマー", accept: ["ミスリルハンマー", "みすりるはんまー"], hint: "ハンマー" },
        { display: "ウォーハンマー", accept: ["ウォーハンマー", "うぉーはんまー"], hint: "ハンマー" },
        { display: "大地のハンマー", accept: ["大地のハンマー", "だいちのはんまー"], hint: "ハンマー" },
        { display: "トールのハンマー", accept: ["トールのハンマー", "とおるのはんまー"], hint: "ハンマー" },

        // 刀
        { display: "阿修羅", accept: ["阿修羅", "あしゅら"], hint: "刀" },
        { display: "風切りの刃", accept: ["風切りの刃", "かぜきりのやいば"], hint: "刀" },
        { display: "備前長船", accept: ["備前長船", "びぜんおさふね"], hint: "刀" },
        { display: "虎徹", accept: ["虎徹", "こてつ"], hint: "刀" },
        { display: "菊一文字", accept: ["菊一文字", "きくいちもんじ"], hint: "刀" },
        { display: "村雨", accept: ["村雨", "むらさめ"], hint: "刀" },
        { display: "正宗", accept: ["正宗", "まさむね"], hint: "刀" },
        { display: "天の叢雲", accept: ["天の叢雲", "あめのむらくも"], hint: "刀" },

        // ロッド
        { display: "ロッド", accept: ["ロッド", "ろっど"], hint: "ロッド" },
        { display: "炎のロッド", accept: ["炎のロッド", "ほのおのろっど"], hint: "ロッド" },
        { display: "氷のロッド", accept: ["氷のロッド", "こおりのろっど"], hint: "ロッド" },
        { display: "雷のロッド", accept: ["雷のロッド", "かみなりのろっど"], hint: "ロッド" },
        { display: "リリスのロッド", accept: ["リリスのロッド", "りりすのろっど"], hint: "ロッド" },
        { display: "ポイズンロッド", accept: ["ポイズンロッド", "ぽいずんろっど"], hint: "ロッド" },
        { display: "ウィザードロッド", accept: ["ウィザードロッド", "ういざーどろっど"], hint: "ロッド" },
        { display: "ワンダーワンド", accept: ["ワンダーワンド", "わんだーわんど"], hint: "ロッド" },

        // 杖
        { display: "癒しの杖", accept: ["癒しの杖", "いやしのつえ"], hint: "杖" },
        { display: "光の杖", accept: ["光の杖", "ひかりのつえ"], hint: "杖" },
        { display: "力の杖", accept: ["力の杖", "ちからのつえ"], hint: "杖" },
        { display: "賢者の杖", accept: ["賢者の杖", "けんじゃのつえ"], hint: "杖" },
        { display: "裁きの杖", accept: ["裁きの杖", "さばきのつえ"], hint: "杖" },

        // 槌矛
        { display: "杖", accept: ["杖", "つえ"], hint: "槌矛" },
        { display: "フレイル", accept: ["フレイル", "ふれいる"], hint: "槌矛" },
        { display: "モーニングスター", accept: ["モーニングスター", "もーにんぐすたー"], hint: "槌矛" },

        // 弓矢
        { display: "銀の弓矢", accept: ["銀の弓矢", "ぎんのゆみや"], hint: "弓矢" },
        { display: "炎の弓矢", accept: ["炎の弓矢", "ほのおのゆみや"], hint: "弓矢" },
        { display: "氷の弓矢", accept: ["氷の弓矢", "こおりのゆみや"], hint: "弓矢" },
        { display: "雷の弓矢", accept: ["雷の弓矢", "かみなりのゆみや"], hint: "弓矢" },
        { display: "暗闇の弓矢", accept: ["暗闇の弓矢", "くらやみのゆみや"], hint: "弓矢" },
        { display: "キラーボウ", accept: ["キラーボウ", "きらーぼう"], hint: "弓矢" },
        { display: "エルフィンボウ", accept: ["エルフィンボウ", "えるふぃんぼう"], hint: "弓矢" },
        { display: "疾風の弓矢", accept: ["疾風の弓矢", "しっぷうのゆみや"], hint: "弓矢" },
        { display: "エイビスキラー", accept: ["エイビスキラー", "えいびすきらー"], hint: "弓矢" },
        { display: "魔封じの弓矢", accept: ["魔封じの弓矢", "まふうじのゆみや"], hint: "弓矢" },
        { display: "与一の弓", accept: ["与一の弓", "よいちのゆみ"], hint: "弓矢" },
        { display: "アルテミスの弓", accept: ["アルテミスの弓", "あるてみすのゆみ"], hint: "弓矢" },

        // 竪琴
        { display: "銀の竪琴", accept: ["銀の竪琴", "ぎんのたてごと"], hint: "竪琴" },
        { display: "夢の竪琴", accept: ["夢の竪琴", "ゆめのたてごと"], hint: "竪琴" },
        { display: "ラミアの竪琴", accept: ["ラミアの竪琴", "らみのたてごと"], hint: "竪琴" },
        { display: "アポロンのハープ", accept: ["アポロンのハープ", "あぽろんのはーぷ"], hint: "竪琴" },

        // 鞭
        { display: "鞭", accept: ["鞭", "むち"], hint: "鞭" },
        { display: "電撃鞭", accept: ["電撃鞭", "でんげきむち"], hint: "鞭" },
        { display: "チェンウィップ", accept: ["チェンウィップ", "ちぇんうぃっぷ"], hint: "鞭" },
        { display: "ビーストキラー", accept: ["ビーストキラー", "びーすときらー"], hint: "鞭" },
        { display: "ファイアビュート", accept: ["ファイアビュート", "ふぁいあびゅーと"], hint: "鞭" },
        { display: "竜の髭", accept: ["竜の髭", "りゅうのひげ"], hint: "鞭" },

        // ベル
        { display: "ギヤマンの鐘", accept: ["ギヤマンの鐘", "ぎやまんのかね"], hint: "ベル" },
        { display: "大地のベル", accept: ["大地のベル", "だいちのべる"], hint: "ベル" },
        { display: "ルーンのベル", accept: ["ルーンのベル", "るーんのべる"], hint: "ベル" },
        { display: "ティンカーベル", accept: ["ティンカーベル", "てぃんかーべる"], hint: "ベル" },

        // 投擲武器
        { display: "円月輪", accept: ["円月輪", "えんげつりん"], hint: "投擲武器" },
        { display: "ライジングサン", accept: ["ライジングサン", "らいじんぐさん"], hint: "投擲武器" },

        // 武器その他
        { display: "ツインランサー", accept: ["ツインランサー", "ついんらんさー"], hint: "武器その他" },

        // 盾
        { display: "革の盾", accept: ["革の盾", "かわのたて"], hint: "盾" },
        { display: "ブロンズシールド", accept: ["ブロンズシールド", "ぶろんずしーるど"], hint: "盾" },
        { display: "アイアンシールド", accept: ["アイアンシールド", "あいあんしーるど"], hint: "盾" },
        { display: "ミスリルシールド", accept: ["ミスリルシールド", "みすりるしーるど"], hint: "盾" },
        { display: "ゴールドシールド", accept: ["ゴールドシールド", "ごーるどしーるど"], hint: "盾" },
        { display: "イージスの盾", accept: ["イージスの盾", "いーじすのたて"], hint: "盾" },
        { display: "ダイアの盾", accept: ["ダイアの盾", "だいあのたて"], hint: "盾" },
        { display: "フレイムシールド", accept: ["フレイムシールド", "ふれいむしーるど"], hint: "盾" },
        { display: "アイスシールド", accept: ["アイスシールド", "あいすしーるど"], hint: "盾" },
        { display: "クリスタルの盾", accept: ["クリスタルの盾", "くりすたるのたて"], hint: "盾" },
        { display: "源氏の盾", accept: ["源氏の盾", "げんじのたて"], hint: "盾" },

        // 帽子
        { display: "革の帽子", accept: ["革の帽子", "かわのぼうし"], hint: "帽子" },
        { display: "羽根付き帽子", accept: ["羽根付き帽子", "はねつきぼうし"], hint: "帽子" },
        { display: "ヒュプノクラウン", accept: ["ヒュプノクラウン", "ひゅぷのくらうん"], hint: "帽子" },

        // 兜
        { display: "ブロンズヘルム", accept: ["ブロンズヘルム", "ぶろんずへるむ"], hint: "兜" },
        { display: "アイアンヘルム", accept: ["アイアンヘルム", "あいあんへるむ"], hint: "兜" },
        { display: "ミスリルヘルム", accept: ["ミスリルヘルム", "みすりるへるむ"], hint: "兜" },
        { display: "ゴールドヘルム", accept: ["ゴールドヘルム", "ごーるどへるむ"], hint: "兜" },
        { display: "ダイアの兜", accept: ["ダイアの兜", "だいあのかぶと"], hint: "兜" },
        { display: "クリスタルヘルム", accept: ["クリスタルヘルム", "くりすたるへるむ"], hint: "兜" },
        { display: "源氏の兜", accept: ["源氏の兜", "げんじのかぶと"], hint: "兜" },
        { display: "茨の冠", accept: ["茨の冠", "いばらのかんむり"], hint: "兜" },

        // 戦闘帽子
        { display: "グリーンベレー", accept: ["グリーンベレー", "ぐりーんべれー"], hint: "戦闘帽子" },
        { display: "ねじりはちまき", accept: ["ねじりはちまき"], hint: "戦闘帽子" },
        { display: "タイガーマスク", accept: ["タイガーマスク", "たいがーますく"], hint: "戦闘帽子" },
        { display: "黒頭巾", accept: ["黒頭巾", "くろずきん"], hint: "戦闘帽子" },

        // 魔法帽子
        { display: "三角帽子", accept: ["三角帽子", "さんかくぼうし"], hint: "魔法帽子" },
        { display: "司祭の帽子", accept: ["司祭の帽子", "しさいのぼうし"], hint: "魔法帽子" },
        { display: "サークレット", accept: ["サークレット", "さーくれっと"], hint: "魔法帽子" },
        { display: "金の髪飾り", accept: ["金の髪飾り", "きんのかみかざり"], hint: "魔法帽子" },
        { display: "ラミアのティアラ", accept: ["ラミアのティアラ", "らみあのてぃあら"], hint: "魔法帽子" },

        // 頭部その他
        { display: "リボン", accept: ["リボン", "りぼん"], hint: "頭部その他" },

        // 鎧
        { display: "ブロンズアーマー", accept: ["ブロンズアーマー", "ぶろんずあーまー"], hint: "鎧" },
        { display: "アイアンアーマー", accept: ["アイアンアーマー", "あいあんあーまー"], hint: "鎧" },
        { display: "ミスリルアーマー", accept: ["ミスリルアーマー", "みすりるあーまー"], hint: "鎧" },
        { display: "ゴールドアーマー", accept: ["ゴールドアーマー", "ごーるどあーまー"], hint: "鎧" },
        { display: "ダイアの鎧", accept: ["ダイアの鎧", "だいあのよろい"], hint: "鎧" },
        { display: "クリスタルメイル", accept: ["クリスタルメイル", "くりすたるめいる"], hint: "鎧" },
        { display: "源氏の鎧", accept: ["源氏の鎧", "げんじのよろい"], hint: "鎧" },

        // 軽装鎧
        { display: "革の服", accept: ["革の服", "かわのふく"], hint: "軽装鎧" },
        { display: "銅の胸当て", accept: ["銅の胸当て", "どうのむねあて"], hint: "軽装鎧" },
        { display: "拳法着", accept: ["拳法着", "けんぽうぎ"], hint: "軽装鎧" },
        { display: "銀の胸当て", accept: ["銀の胸当て", "ぎんのむねあて"], hint: "軽装鎧" },
        { display: "忍びの衣", accept: ["忍びの衣", "しのびのころも"], hint: "軽装鎧" },
        { display: "力だすき", accept: ["力だすき", "ちからだすき"], hint: "軽装鎧" },
        { display: "ダイアの胸当て", accept: ["ダイアの胸当て", "だいあのむねあて"], hint: "軽装鎧" },
        { display: "ミラージュベスト", accept: ["ミラージュベスト", "みらーじゅべすと"], hint: "軽装鎧" },
        { display: "黒装束", accept: ["黒装束", "くろしょうぞく"], hint: "軽装鎧" },
        { display: "ボーンメイル", accept: ["ボーンメイル", "ぼーんめいる"], hint: "軽装鎧" },

        // ローブ
        { display: "木綿のローブ", accept: ["木綿のローブ", "もめんのろーぶ"], hint: "ローブ" },
        { display: "シルクのローブ", accept: ["シルクのローブ", "しるくのろーぶ"], hint: "ローブ" },
        { display: "詩人の服", accept: ["詩人の服", "しじんのふく"], hint: "ローブ" },
        { display: "大地の衣", accept: ["大地の衣", "だいちのころも"], hint: "ローブ" },
        { display: "光のローブ", accept: ["光のローブ", "ひかりのろーぶ"], hint: "ローブ" },
        { display: "白のローブ", accept: ["白のローブ", "しろのろーぶ"], hint: "ローブ" },
        { display: "黒のローブ", accept: ["黒のローブ", "くろのろーぶ"], hint: "ローブ" },

        // 体部その他
        { display: "天使の白衣", accept: ["天使の白衣", "てんしのはくい"], hint: "体部その他" },
        { display: "レインボードレス", accept: ["レインボードレス", "れいんぼーどれす"], hint: "体部その他" },

        // 小手
        { display: "ミスリルの小手", accept: ["ミスリルの小手", "みすりるのこて"], hint: "小手" },
        { display: "盗賊の小手", accept: ["盗賊の小手", "とうぞくのこて"], hint: "小手" },
        { display: "ガントレット", accept: ["ガントレット", "がんとれっと"], hint: "小手" },
        { display: "巨人の小手", accept: ["巨人の小手", "きょじんのこて"], hint: "小手" },
        { display: "源氏の小手", accept: ["源氏の小手", "げんじのこて"], hint: "小手" },

        // 腕輪
        { display: "銀の腕輪", accept: ["銀の腕輪", "ぎんのうでわ"], hint: "腕輪" },
        { display: "パワーリスト", accept: ["パワーリスト", "ぱわーりすと"], hint: "腕輪" },
        { display: "ダイアの腕輪", accept: ["ダイアの腕輪", "だいあのうでわ"], hint: "腕輪" },

        // 靴
        { display: "革の靴", accept: ["革の靴", "かわのくつ"], hint: "靴" },
        { display: "エルメスの靴", accept: ["エルメスの靴", "えるめすのくつ"], hint: "靴" },
        { display: "赤い靴", accept: ["赤い靴", "あかいくつ"], hint: "靴" },

        // 指輪
        { display: "天使の指輪", accept: ["天使の指輪", "てんしのゆびわ"], hint: "指輪" },
        { display: "炎の指輪", accept: ["炎の指輪", "ほのおのゆびわ"], hint: "指輪" },
        { display: "珊瑚の指輪", accept: ["珊瑚の指輪", "さんごのゆびわ"], hint: "指輪" },
        { display: "リフレクトリング", accept: ["リフレクトリング", "りふれくとりんぐ"], hint: "指輪" },
        { display: "守りの指輪", accept: ["守りの指輪", "まもりのゆびわ"], hint: "指輪" },
        { display: "呪いの指輪", accept: ["呪いの指輪", "のろいのゆびわ"], hint: "指輪" },

        // アクセサリーその他
        { display: "カイザーナックル", accept: ["カイザーナックル", "かいざーなっくる"], hint: "アクセサリーその他" },
        { display: "銀縁眼鏡", accept: ["銀縁眼鏡", "ぎんぶちめがね"], hint: "アクセサリーその他" },
        { display: "エルフのマント", accept: ["エルフのマント", "えるふのまんと"], hint: "アクセサリーその他" },
        { display: "コルナゴの壺", accept: ["コルナゴの壺", "こるなごのつぼ"], hint: "アクセサリーその他" },

        // アイテム
        { display: "ポーション", accept: ["ポーション", "ぽーしょん"], hint: "アイテム" },
        { display: "ハイポーション", accept: ["ハイポーション", "はいぽーしょん"], hint: "アイテム" },
        { display: "フェニックスの尾", accept: ["フェニックスの尾", "ふぇにっくすのお"], hint: "アイテム" },
        { display: "エーテル", accept: ["エーテル", "えーてる"], hint: "アイテム" },
        { display: "エリクサー", accept: ["エリクサー", "えりくさー"], hint: "アイテム" },
        { display: "毒消し", accept: ["毒消し", "どくけし"], hint: "アイテム" },
        { display: "目薬", accept: ["目薬", "めぐすり"], hint: "アイテム" },
        { display: "金の針", accept: ["金の針", "きんのはり"], hint: "アイテム" },
        { display: "乙女のキッス", accept: ["乙女のキッス", "おとめのにきっす"], hint: "アイテム" },
        { display: "打ち出の小槌", accept: ["打ち出の小槌", "うちでのこづち"], hint: "アイテム" },
        { display: "聖水", accept: ["聖水", "せいすい"], hint: "アイテム" },
        { display: "テント", accept: ["テント", "てんと"], hint: "アイテム" },
        { display: "コテージ", accept: ["コテージ", "こてーじ"], hint: "アイテム" },
        { display: "巨人の薬", accept: ["巨人の薬", "きょじんのくすり"], hint: "アイテム" },
        { display: "力の薬", accept: ["力の薬", "ちからのくすり"], hint: "アイテム" },
        { display: "スピードドリンク", accept: ["スピードドリンク", "すぴーどどりんく"], hint: "アイテム" },
        { display: "プロテスドリンク", accept: ["プロテスドリンク", "ぷろてすどりんく"], hint: "アイテム" },
        { display: "英雄の薬", accept: ["英雄の薬", "えいゆうのくすり"], hint: "アイテム" },
        { display: "火遁の術", accept: ["火遁の術", "かとんのじゅつ"], hint: "アイテム" },
        { display: "水遁の術", accept: ["水遁の術", "すいとんのじゅつ"], hint: "アイテム" },
        { display: "雷迅の術", accept: ["雷迅の術", "らいじんのじゅつ"], hint: "アイテム" },
        { display: "すす", accept: ["すす", "スス"], hint: "アイテム" },
        { display: "手裏剣", accept: ["手裏剣", "しゅりけん"], hint: "アイテム" },
        { display: "風魔手裏剣", accept: ["風魔手裏剣", "ふうましゅりけん"], hint: "アイテム" },
        { display: "亀の甲羅", accept: ["亀の甲羅", "かめのこうら"], hint: "アイテム" },
        { display: "竜の牙", accept: ["竜の牙", "りゅうのきば"], hint: "アイテム" },
        { display: "ダークマター", accept: ["ダークマター", "だーくまたー"], hint: "アイテム" },
        { display: "魔法のランプ", accept: ["魔法のランプ", "まほうのらんぷ"], hint: "アイテム" },
        { display: "ラムウ", accept: ["ラムウ", "らむう"], hint: "アイテム" },
        { display: "ゴーレム", accept: ["ゴーレム", "ごーれむ"], hint: "アイテム" },
        { display: "カトブレパス", accept: ["カトブレパス", "かとぶれぱす"], hint: "アイテム" },
        { display: "竜の紋章", accept: ["竜の紋章", "りゅうのもんしょう"], hint: "アイテム" },
        { display: "オメガの勲章", accept: ["オメガの勲章", "おめがのくんしょう"], hint: "アイテム" }
    ];

    let foundCount = 0;
    let isGameOver = false;
    let answeredIndices = new Set();

    const input = document.getElementById('answerInput');
    const remainingText = document.getElementById('remaining');
    const totalText = document.getElementById('total');
    const listContainer = document.getElementById('answerList');
    const messageEl = document.getElementById('message');
    const giveupBtn = document.getElementById('giveupBtn');
    const retryBtn = document.getElementById('retryBtn');
    const limitFill = document.getElementById('limitFill');
    const gaugeWrapper = document.getElementById('gaugeWrapper');
    const progressPercentText = document.getElementById('progressPercent');

    function updateLimitGauge() {
        const percent = Math.floor((foundCount / quizData.length) * 100);
        if(limitFill) limitFill.style.width = percent + "%";
        if(progressPercentText) {
            progressPercentText.textContent = (foundCount === quizData.length) ? "MASTER!!" : percent + "%";
        }
        if (foundCount === quizData.length && quizData.length > 0) {
            gaugeWrapper.classList.add('limit-max');
        } else {
            gaugeWrapper.classList.remove('limit-max');
        }
    }

    function init() {
        foundCount = 0;
        isGameOver = false;
        answeredIndices.clear();
        listContainer.innerHTML = '';
        input.disabled = false;
        input.value = '';
        input.placeholder = config.placeholderNormal;
        giveupBtn.style.display = 'inline-block';
        retryBtn.style.display = 'none';
        remainingText.textContent = quizData.length;
        totalText.textContent = quizData.length;
        messageEl.textContent = '';

        quizData.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = 'item';
            div.id = 'target-' + index;
            // ？？？を表示せず、ヒント（カテゴリ）のみを初期表示
            div.innerHTML = `<div class="hint-text">${item.hint}</div><div class="answer-text"></div>`;
            listContainer.appendChild(div);
        });

        loadProgress();
        updateLimitGauge();
    }

    function loadProgress() {
        const savedData = localStorage.getItem(config.storageKey);
        if (savedData) {
            const savedIndices = JSON.parse(savedData);
            savedIndices.forEach(index => {
                if (index < quizData.length) {
                    answeredIndices.add(index);
                    updateItemDisplay(index, true, false); // ロード時はスクロールしない
                    foundCount++;
                }
            });
            remainingText.textContent = quizData.length - foundCount;
            if (foundCount > 0) showMessage("セーブデータから つづけます", "#ffff00");
        }
    }

    function saveProgress() {
        localStorage.setItem(config.storageKey, JSON.stringify(Array.from(answeredIndices)));
    }

    input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && !isGameOver) {
            const val = input.value.trim();
            if (val === "") return;
            let targetIndex = quizData.findIndex(item => item.accept.includes(val));

            if (targetIndex !== -1) {
                if (answeredIndices.has(targetIndex)) {
                    showMessage("すでに みつけています", "#ffff00");
                    scrollToItem(targetIndex);
                } else {
                    answeredIndices.add(targetIndex);
                    updateItemDisplay(targetIndex, true, true);
                    foundCount++;
                    remainingText.textContent = quizData.length - foundCount;
                    showMessage("正解！", "#ffffff");
                    saveProgress();
                    updateLimitGauge();
                    if (foundCount === quizData.length) finishGame("コンプリート！", "#ffff00");
                }
            } else {
                showMessage("ミス！", "#ff4444");
            }
            input.value = '';
        }
    });

    function updateItemDisplay(index, isCorrect, shouldScroll) {
        const targetEl = document.getElementById('target-' + index);
        const data = quizData[index];
        targetEl.innerHTML = `<div class="hint-text">${data.hint}</div><div class="answer-text">${data.display}</div>`;
        
        if (isCorrect) {
            targetEl.classList.add('found');
            if (shouldScroll) scrollToItem(index);
        } else {
            targetEl.classList.add('missed');
        }
    }

    function scrollToItem(index) {
        document.getElementById('target-' + index).scrollIntoView({
            behavior: 'smooth',
            block: 'center'
        });
    }

    giveupBtn.addEventListener('click', () => {
        quizData.forEach((item, index) => {
            if (!answeredIndices.has(index)) updateItemDisplay(index, false, false);
        });
        finishGame("しゅうりょう！ 答え合わせです", "#ffffff");
    });

    retryBtn.addEventListener('click', () => {
        if(confirm("データをけして 最初から遊びますか？")) {
            localStorage.removeItem(config.storageKey);
            init();
        }
    });

    function finishGame(msg, color) {
        isGameOver = true;
        input.disabled = true;
        input.placeholder = config.placeholderGameOver;
        giveupBtn.style.display = 'none';
        retryBtn.style.display = 'inline-block';
        showMessage(msg, color);
    }

    function showMessage(text, color) {
        messageEl.textContent = text;
        messageEl.style.color = color;
    }

    init();
</script>

</body>
</html>