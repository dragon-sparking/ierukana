<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>アニメタイトルロゴクイズ2</title>
    <style>
        :root {
            --primary-red: #e60012;
            --bg-gray: #f5f5f5;
            --border-color: #ddd;
            --text-main: #333;
        }

        body { 
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif; 
            text-align: center; 
            padding: 0; 
            background-color: var(--bg-gray); 
            color: var(--text-main); 
            margin: 0; 
        }

        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            background: #fff; 
            padding: 20px; 
            min-height: 100vh;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
        }

        .sticky-header { 
            position: sticky; 
            top: 0; 
            background: #fff; 
            padding: 20px 0; 
            z-index: 100; 
            border-bottom: 2px solid var(--primary-red); 
            margin-bottom: 20px; 
        }

        h2 { margin: 0 0 10px 0; color: var(--primary-red); font-size: 1.5em; }

        .limit-gauge-outer {
            max-width: 600px;
            margin: 10px auto;
            background: #eee;
            border-radius: 20px;
            overflow: hidden;
            height: 12px;
        }

        #limitFill {
            height: 100%;
            width: 0%;
            background: var(--primary-red);
            transition: width 0.4s ease;
        }

        .status { margin: 10px 0; font-weight: bold; font-size: 1em; color: #666; }
        #message { height: 24px; font-weight: bold; margin-bottom: 10px; font-size: 1.1em; }

        .btn { 
            padding: 10px 20px; font-size: 14px; cursor: pointer; border-radius: 4px; 
            border: none; background: #666; color: white; margin: 0 5px;
        }
        .btn.giveup-btn { background: #999; }

        .list { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
            gap: 20px; margin-top: 20px; 
        }

        .item { 
            background: #fff; border: 1px solid var(--border-color); 
            display: flex; flex-direction: column; padding-bottom: 10px;
            transition: all 0.3s;
        }

        .item.found { border: 2px solid var(--primary-red); }

        .hint-image img {
            width: 100%;
            height: 160px;
            object-fit: contain; 
            background: #fdfdfd; 
        }

        /* 個別回答エリア */
        .answer-container {
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center; 
            gap: 8px;
            min-height: 50px;
        }

        /* 各カードの入力欄 */
        .card-input {
            width: 80%;
            padding: 8px;
            font-size: 13px;
            border: 1px solid #ccc;
            border-radius: 4px;
            text-align: center;
            outline: none;
        }
        .card-input:focus { border-color: var(--primary-red); }

        .mini-hint-thumb {
            width: 35px;
            height: 35px;
            object-fit: contain;
            border: 1px solid #eee;
            background: #fff;
        }

        .answer-text { 
            font-size: 13px; 
            font-weight: bold;
            text-align: center; 
            line-height: 1.4;
        }

        .item.found .answer-text { color: var(--primary-red); }
        .item.missed .answer-text { 
            color: #999; 
            text-decoration: line-through; 
            text-decoration-color: #666;
        }

        @media (max-width: 600px) {
            .list { grid-template-columns: 1fr 1fr; gap: 10px; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="sticky-header">
        <h2>アニメタイトルロゴクイズ2</h2>
        <div class="limit-gauge-outer">
            <div id="limitFill"></div>
        </div>
        <div class="status">残り <span id="remaining">--</span> / 全 <span id="total">--</span> 問</div>
        <div id="message"></div>
        <button class="btn giveup-btn" id="giveupBtn">ギブアップ</button>
        <button class="btn retry-btn" id="retryBtn" style="display:none;">もう一度</button>
    </div>
    <div class="list" id="answerList"></div>
</div>

<script>
    const config = {
        storageKey: "quiz_save_" + document.title
    };

    const quizData = [
        { 
            display: "俺だけレベルアップな件", 
            accept: ["俺だけレベルアップな件", "おれだけれべるあっぷなけん"], 
            image: "animetitle2/001_q.jpg", 
            foundImage: "animetitle2/001_a.jpg" 
        },
        { 
            display: "俺は全てを【パリイ】する 〜逆勘違いの世界最強は冒険者になりたい〜", 
            accept: ["俺は全てをパリイする", "おれはすべてをぱりいする", "おれはすべてをぱりいするぎゃくかんちがいのせかいさいきょうはぼうけんしゃになりたい"], 
            image: "animetitle2/002_q.jpg", 
            foundImage: "animetitle2/002_a.jpg" 
        },
        { 
            display: "キボウノチカラ〜オトナプリキュア'23〜", 
            accept: ["キボウノチカラオトナプリキュア", "きぼうのちからおとなぷりきゅあ", "きぼうのちから", "おとなぷりきゅあ", "きぼうのちからおとなぷりきゅあ23", "きぼうのちからおとなぷりきゅあにじゅうさん"], 
            image: "animetitle2/003_q.jpg", 
            foundImage: "animetitle2/003_a.jpg" 
        },
        { 
            display: "株式会社マジルミエ", 
            accept: ["株式会社マジルミエ", "かぶしきがいしゃまじるみえ", "まじるみえ"], 
            image: "animetitle2/004_q.jpg", 
            foundImage: "animetitle2/004_a.jpg" 
        },
        { 
            display: "アオのハコ", 
            accept: ["アオのハコ", "あおのはこ"], 
            image: "animetitle2/005_q.jpg", 
            foundImage: "animetitle2/005_a.jpg" 
        },
        { 
            display: "魔法少女まどか☆マギカ", 
            accept: ["魔法少女まどかマギカ", "まほうしょうじょまどかまぎか", "まどかまぎか"], 
            image: "animetitle2/006_q.jpg", 
            foundImage: "animetitle2/006_a.jpg" 
        },
        { 
            display: "名探偵プリキュア!", 
            accept: ["名探偵プリキュア", "めいたんていぷりきゅあ"], 
            image: "animetitle2/007_q.jpg", 
            foundImage: "animetitle2/007_a.jpg" 
        },
        { 
            display: "天穂のサクナヒメ", 
            accept: ["天穂のサクナヒメ", "てんすいのさくなひめ", "さくなひめ"], 
            image: "animetitle2/008_q.jpg", 
            foundImage: "animetitle2/008_a.jpg" 
        },
        { 
            display: "プリンセッション・オーケストラ", 
            accept: ["プリンセッションオーケストラ", "ぷりんせっしょんおーけすとら", "ぷりんせっしょん"], 
            image: "animetitle2/009_q.jpg", 
            foundImage: "animetitle2/009_a.jpg" 
        },
        { 
            display: "モブサイコ100", 
            accept: ["モブサイコ100", "もぶさいこ", "もぶさいこ100", "もぶさいこひゃく"], 
            image: "animetitle2/010_q.jpg", 
            foundImage: "animetitle2/010_a.jpg" 
        },
        { 
            display: "銀河特急 ミルキー☆サブウェイ", 
            accept: ["銀河特急ミルキーサブウェイ", "ぎんがとっきゅうみるきーさぶうぇい", "みるきーさぶうぇい"], 
            image: "animetitle2/011_q.jpg", 
            foundImage: "animetitle2/011_a.jpg" 
        },
        { 
            display: "ウマ娘シンデレラグレイ", 
            accept: ["ウマ娘シンデレラグレイ", "うまむすめしんでれらぐれい", "しんでれらぐれい"], 
            image: "animetitle2/012_q.jpg", 
            foundImage: "animetitle2/012_a.jpg" 
        },
        { 
            display: "ラブライブ!スーパースター!!", 
            accept: ["ラブライブスーパースター", "らぶらいぶすーぱーすたー"], 
            image: "animetitle2/013_q.jpg", 
            foundImage: "animetitle2/013_a.jpg" 
        },
        { 
            display: "ベルセルク", 
            accept: ["ベルセルク", "べるせるく"], 
            image: "animetitle2/014_q.jpg", 
            foundImage: "animetitle2/014_a.jpg" 
        },
        { 
            display: "チェンソーマン", 
            accept: ["チェンソーマン", "ちぇんそーまん"], 
            image: "animetitle2/015_q.jpg", 
            foundImage: "animetitle2/015_a.jpg" 
        },
        { 
            display: "青春ブタ野郎はバニーガール先輩の夢を見ない", 
            accept: ["青春ブタ野郎はバニーガール先輩の夢を見ない", "あおぶた", "せいしゅんぶたやろうはばにーがーるせんぱいのゆめをみない", "せいしゅんぶたやろう"], 
            image: "animetitle2/016_q.jpg", 
            foundImage: "animetitle2/016_a.jpg" 
        },
        { 
            display: "ストライクウィッチーズ", 
            accept: ["ストライクウィッチーズ", "すとらいくうぃっちーず", "すとぱん"], 
            image: "animetitle2/017_q.jpg", 
            foundImage: "animetitle2/017_a.jpg" 
        },
        { 
            display: "アイカツ！", 
            accept: ["アイカツ", "あいかつ"], 
            image: "animetitle2/018_q.jpg", 
            foundImage: "animetitle2/018_a.jpg" 
        },
        { 
            display: "ポプテピピック", 
            accept: ["ポプテピピック", "ぽぷてぴぴっく"], 
            image: "animetitle2/019_q.jpg", 
            foundImage: "animetitle2/019_a.jpg" 
        },
        { 
            display: "メダリスト", 
            accept: ["メダリスト", "めだりすと"], 
            image: "animetitle2/020_q.jpg", 
            foundImage: "animetitle2/020_a.jpg" 
        },
        { 
            display: "アークナイツ", 
            accept: ["アークナイツ", "あーくないつ"], 
            image: "animetitle2/021_q.jpg", 
            foundImage: "animetitle2/021_a.jpg" 
        },
        { 
            display: "テニスの王子様", 
            accept: ["テニスの王子様", "てにすのおうじさま", "てにぷり"], 
            image: "animetitle2/022_q.jpg", 
            foundImage: "animetitle2/022_a.jpg" 
        },
        { 
            display: "超次元ゲイム ネプテューヌ", 
            accept: ["超次元ゲイムネプテューヌ", "ねぷてゅーぬ", "ちょうじげんげいむねぷてゅーぬ"], 
            image: "animetitle2/023_q.jpg", 
            foundImage: "animetitle2/023_a.jpg" 
        },
        { 
            display: "魔法先生ネギま!", 
            accept: ["魔法先生ネギま", "まほうせんせいねぎま"], 
            image: "animetitle2/024_q.jpg", 
            foundImage: "animetitle2/024_a.jpg" 
        },
        { 
            display: "ニートくノ一となぜか同棲はじめました", 
            accept: ["ニートくノ一となぜか同棲はじめました", "にーとくのいちとなぜかどうせいはじめました", "にーとくのいち"], 
            image: "animetitle2/025_q.jpg", 
            foundImage: "animetitle2/025_a.jpg" 
        },
        { 
            display: "終末のハーレム", 
            accept: ["終末のハーレム", "しゅうまつのはーれむ"], 
            image: "animetitle2/026_q.jpg", 
            foundImage: "animetitle2/026_a.jpg" 
        },
        { 
            display: "ヒプノシスマイク", 
            accept: ["ヒプノシスマイク", "ひぷのしすまいく", "ひぷまい"], 
            image: "animetitle2/027_q.jpg", 
            foundImage: "animetitle2/027_a.jpg" 
        },
        { 
            display: "響け！ユーフォニアム", 
            accept: ["響け！ユーフォニアム", "ひびけゆーふぉにあむ", "ゆーふぉにあむ"], 
            image: "animetitle2/028_q.jpg", 
            foundImage: "animetitle2/028_a.jpg" 
        },
        { 
            display: "ヘタリア", 
            accept: ["ヘタリア", "へたりあ"], 
            image: "animetitle2/029_q.jpg", 
            foundImage: "animetitle2/029_a.jpg" 
        },
        { 
            display: "ログ・ホライズン", 
            accept: ["ログホライズン", "ろぐほらいずん", "ろぐほら"], 
            image: "animetitle2/030_q.jpg", 
            foundImage: "animetitle2/030_a.jpg" 
        },
        { 
            display: "増田こうすけ劇場 ギャグマンガ日和", 
            accept: ["ギャグマンガ日和", "ぎゃぐまんがびより"], 
            image: "animetitle2/031_q.jpg", 
            foundImage: "animetitle2/031_a.jpg" 
        },
        { 
            display: "探偵オペラ ミルキィホームズ", 
            accept: ["探偵オペラミルキィホームズ", "たんていおぺらみるきぃほーむず", "みるきぃほーむず"], 
            image: "animetitle2/032_q.jpg", 
            foundImage: "animetitle2/032_a.jpg" 
        },
        { 
            display: "機動武闘伝Gガンダム", 
            accept: ["機動武闘伝Gガンダム", "きどうぶとうでんじーがんだむ", "じーがんだむ"], 
            image: "animetitle2/033_q.jpg", 
            foundImage: "animetitle2/033_a.jpg" 
        },
        { 
            display: "メダロット", 
            accept: ["メダロット", "めだろっと"], 
            image: "animetitle2/034_q.jpg", 
            foundImage: "animetitle2/034_a.jpg" 
        },
        { 
            display: "デジモンアドベンチャー", 
            accept: ["デジモンアドベンチャー", "でじもんあどべんちゃー", "でじもん"], 
            image: "animetitle2/035_q.jpg", 
            foundImage: "animetitle2/035_a.jpg" 
        },
        { 
            display: "僕の心のヤバイやつ", 
            accept: ["僕の心のヤバイやつ", "ぼくやば", "ぼくのこころのやばいやつ"], 
            image: "animetitle2/036_q.jpg", 
            foundImage: "animetitle2/036_a.jpg" 
        },
        { 
            display: "空色ユーティリティ", 
            accept: ["空色ユーティリティ", "そらいろゆーてぃりてぃ"], 
            image: "animetitle2/037_q.jpg", 
            foundImage: "animetitle2/037_a.jpg" 
        },
        { 
            display: "幻日のヨハネ -SUNSHINE in the MIRROR-", 
            accept: ["幻日のヨハネ", "げんじつのよはね"], 
            image: "animetitle2/038_q.jpg", 
            foundImage: "animetitle2/038_a.jpg" 
        },
        { 
            display: "アンデッドアンラック", 
            accept: ["アンデッドアンラック", "あんでっどあんらっく"], 
            image: "animetitle2/041_q.jpg", 
            foundImage: "animetitle2/041_a.jpg" 
        },
        { 
            display: "リコリス・リコイル", 
            accept: ["リコリスリコイル", "りこりすりこいる", "りこりこ"], 
            image: "animetitle2/042_q.jpg", 
            foundImage: "animetitle2/042_a.jpg" 
        },
        { 
            display: "キミとアイドルプリキュア♪", 
            accept: ["キミとアイドルプリキュア", "きみとあいどるぷりきゅあ"], 
            image: "animetitle2/043_q.jpg", 
            foundImage: "animetitle2/043_a.jpg" 
        },
        { 
            display: "戦隊レッド 異世界で冒険者になる", 
            accept: ["戦隊レッド異世界で冒険者になる", "せんたいれっど", "せんたいれっどいせかいでぼうけんしゃになる"], 
            image: "animetitle2/044_q.jpg", 
            foundImage: "animetitle2/044_a.jpg" 
        },
        { 
            display: "ギルドの受付嬢ですが、残業は嫌なのでボスをソロ討伐しようと思います", 
            accept: ["ギルドの受付嬢ですが残業は嫌なのでボスをソロ討伐しようと思います", "ぎるどのうけつけじょうですがざんぎょうはいやなのでぼすをそろとうばつしようとおもいます", "ぎるます"], 
            image: "animetitle2/045_q.jpg", 
            foundImage: "animetitle2/045_a.jpg" 
        },
        { 
            display: "ワールドトリガー", 
            accept: ["ワールドトリガー", "わーるどとりがー"], 
            image: "animetitle2/046_q.jpg", 
            foundImage: "animetitle2/046_a.jpg" 
        },
        { 
            display: "ヲタクに恋は難しい", 
            accept: ["ヲタクに恋は難しい", "をたくにこいはむずかしい", "をたこい"], 
            image: "animetitle2/047_q.jpg", 
            foundImage: "animetitle2/047_a.jpg" 
        },
        { 
            display: "勇気爆発バーンブレイバーン", 
            accept: ["勇気爆発バーンブレイバーン", "ゆうきばくはつばーんぶれいばーん", "ぶれいばーん", "ばーんぶれいばーん"], 
            image: "animetitle2/048_q.jpg", 
            foundImage: "animetitle2/048_a.jpg" 
        },
     ];

    let foundCount = 0;
    let isGameOver = false;
    let answeredIndices = new Set();

    const remainingText = document.getElementById('remaining');
    const totalText = document.getElementById('total');
    const listContainer = document.getElementById('answerList');
    const messageEl = document.getElementById('message');
    const giveupBtn = document.getElementById('giveupBtn');
    const retryBtn = document.getElementById('retryBtn');
    const limitFill = document.getElementById('limitFill');

    function updateLimitGauge() {
        const percent = (foundCount / quizData.length) * 100;
        if(limitFill) limitFill.style.width = percent + "%";
    }

    function init() {
        foundCount = 0;
        isGameOver = false;
        answeredIndices.clear();
        listContainer.innerHTML = '';
        giveupBtn.style.display = 'inline-block';
        retryBtn.style.display = 'none';
        remainingText.textContent = quizData.length;
        totalText.textContent = quizData.length;
        messageEl.textContent = '';

        quizData.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = 'item';
            div.id = 'target-' + index;
            // 初期状態は入力欄を表示
            div.innerHTML = `
                <div class="hint-image"><img src="${item.image}" alt=""></div>
                <div class="answer-container" id="container-${index}">
                    <input type="text" class="card-input" placeholder="作品名は？" data-index="${index}">
                </div>
            `;
            listContainer.appendChild(div);
        });

        // 各入力欄にイベント設定
        document.querySelectorAll('.card-input').forEach(input => {
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') checkAnswer(input);
            });
        });

        loadProgress();
        updateLimitGauge();
    }

    function checkAnswer(inputEl) {
        if (isGameOver) return;
        const index = parseInt(inputEl.dataset.index);
        const val = inputEl.value.trim();
        if (val === "") return;

        const data = quizData[index];
        if (data.accept.includes(val)) {
            answeredIndices.add(index);
            updateItemDisplay(index, true);
            foundCount++;
            remainingText.textContent = quizData.length - foundCount;
            saveProgress();
            updateLimitGauge();
            showMessage("正解！", "#e60012");
            if (foundCount === quizData.length) finishGame("全問正解！おめでとうございます！", "#e60012");
        } else {
            inputEl.value = '';
            inputEl.placeholder = "不正解！";
            setTimeout(() => { inputEl.placeholder = "作品名は？"; }, 1000);
        }
    }

    function updateItemDisplay(index, isFoundByPlayer) {
        const targetEl = document.getElementById('target-' + index);
        const container = document.getElementById('container-' + index);
        const data = quizData[index];
        if(!targetEl || !container) return;
        
        // 画像を正解画像に
        targetEl.querySelector('.hint-image img').src = data.foundImage;

        // 入力欄を消して正解テキストを表示
        container.innerHTML = `
            <img src="${data.image}" class="mini-hint-thumb" alt="ヒント">
            <div class="answer-text">${data.display}</div>
        `;
        
        if (isFoundByPlayer) {
            targetEl.classList.add('found');
        } else {
            targetEl.classList.add('missed');
        }
    }

    function showMessage(text, color) {
        messageEl.textContent = text;
        messageEl.style.color = color;
        if (!isGameOver) {
            setTimeout(() => { if (messageEl.textContent === text) messageEl.textContent = ""; }, 1500);
        }
    }

    function saveProgress() {
        localStorage.setItem(config.storageKey, JSON.stringify(Array.from(answeredIndices)));
    }

    function loadProgress() {
        const savedData = localStorage.getItem(config.storageKey);
        if (savedData) {
            const savedIndices = JSON.parse(savedData);
            savedIndices.forEach(index => {
                if (index < quizData.length) {
                    answeredIndices.add(index);
                    updateItemDisplay(index, true);
                    foundCount++;
                }
            });
            remainingText.textContent = quizData.length - foundCount;
        }
    }

    giveupBtn.addEventListener('click', () => {
        isGameOver = true;
        quizData.forEach((item, index) => {
            if (!answeredIndices.has(index)) updateItemDisplay(index, false);
        });
        finishGame("答え合わせ", "#666");
    });

    retryBtn.addEventListener('click', () => {
        if(confirm("リセットしますか？")) {
            localStorage.removeItem(config.storageKey);
            init();
        }
    });

    function finishGame(msg, color) {
        isGameOver = true;
        document.querySelectorAll('.card-input').forEach(i => i.disabled = true);
        giveupBtn.style.display = 'none';
        retryBtn.style.display = 'inline-block';
        showMessage(msg, color);
    }

    init();
</script>

</body>
</html>