<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>FF9 固有コマンドの名前いえるかな</title>
    <style>
        /* FF9 石板・メニュー風背景 */
        body { 
            font-family: 'Times New Roman', serif, "Meiryo"; 
            text-align: center; 
            padding: 20px; 
            background: #2a221f; /* 深い茶色 */
            background-image: radial-gradient(#4a3b35 1px, transparent 1px);
            background-size: 20px 20px;
            color: #f0eada; 
            margin: 0; 
        }

        /* FF9 ウィンドウ風コンテナ（石板デザイン） */
        .container { 
            max-width: 1500px; 
            margin: 20px auto; 
            background: #3c3c3c; /* 石板の内側 */
            padding: 30px; 
            border-radius: 12px; 
            border: 4px solid #b5a67c; /* 真鍮・金色の枠 */
            outline: 2px solid #2a221f;
            box-shadow: 0 15px 35px rgba(0,0,0,0.8), inset 0 0 15px rgba(0,0,0,0.5); 
        }

        /* ヘッダー部分 */
        .sticky-header { 
            position: sticky; 
            top: 0; 
            background: rgba(60, 60, 60, 0.95); 
            padding: 20px 0; 
            z-index: 100; 
            border-bottom: 2px solid #b5a67c; 
            margin-bottom: 25px; 
            border-radius: 8px 8px 0 0;
        }

        h2 { 
            margin: 0; 
            color: #e8d5a7; 
            font-size: 1.8em;
            letter-spacing: 1px;
            text-shadow: 2px 2px 2px #000; 
        }

        /* FF9風ゲージ（トランスゲージ風） */
        .limit-gauge-outer {
            max-width: 500px;
            margin: 20px auto;
            padding: 3px;
            background: #1a1a1a; 
            border: 2px solid #7a6a4c;
            border-radius: 10px;
            position: relative;
        }

        .limit-gauge-bg {
            height: 16px;
            background: #0a0a0a;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        #limitFill {
            height: 100%;
            width: 0%;
            /* FF9のトランスゲージに近い、エメラルド〜シアンの輝き */
            background: linear-gradient(to right, #004d40, #00bfa5, #e0f2f1);
            box-shadow: 0 0 12px #00bfa5;
            transition: width 0.6s ease-in-out;
        }

        .limit-label {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 12px;
            font-weight: bold;
            color: #fff;
            text-shadow: 1px 1px 2px #000;
            z-index: 2;
        }

        /* トランス状態（MAX時）のアニメーション */
        @keyframes trance-glow {
            0% { filter: hue-rotate(0deg) brightness(1); }
            50% { filter: hue-rotate(180deg) brightness(1.5); }
            100% { filter: hue-rotate(360deg) brightness(1); }
        }

        .limit-max #limitFill {
            background: linear-gradient(to right, #ff4081, #ffeb3b, #00e5ff);
            animation: trance-glow 1s infinite linear;
        }

        .status { margin: 15px 0; font-size: 1.2em; color: #b5a67c; }
        #message { height: 26px; font-weight: bold; margin-bottom: 10px; color: #ffeb3b; }

        input { 
            font-size: 18px; 
            padding: 10px 15px; 
            width: 40%; 
            border: 2px solid #7a6a4c; 
            border-radius: 6px; 
            background: #1a1512; 
            color: #f0eada; 
            outline: none;
        }
        input:focus { border-color: #e8d5a7; box-shadow: 0 0 5px #e8d5a7; }

        .btn { 
            padding: 10px 25px; 
            font-size: 14px; 
            cursor: pointer; 
            border-radius: 6px; 
            border: 2px solid #7a6a4c; 
            background: #4a3b35; 
            color: #e8d5a7; 
            transition: 0.2s; 
            font-weight: bold;
        }
        .btn:hover { background: #e8d5a7; color: #2a221f; }

        /* リスト部分（石板に刻まれた文字風） */
        .list { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); 
            gap: 15px; 
            margin-top: 30px; 
        }

        .item { 
            padding: 15px; 
            background: rgba(0, 0, 0, 0.2); 
            border: 1px solid #5a4a3a;
            border-radius: 8px;
            color: #8a7a6a; 
            transition: 0.4s;
            position: relative;
        }

        .item.found { 
            background: rgba(232, 213, 167, 0.1); 
            color: #f0eada; 
            border-color: #b5a67c; 
            box-shadow: 0 0 10px rgba(181, 166, 124, 0.3);
        }

        .hint-text { font-size: 0.8em; color: #b5a67c; margin-bottom: 5px; font-weight: bold; }
.answer-text { 
            font-size: 1.1em; 
            letter-spacing: 1px; 
            font-weight: bold; /* 太字に変更 */
        }
        .item.missed { background: rgba(139, 0, 0, 0.2); border-color: #ff5252; }
        .item.missed .answer-text { color: #ff5252; }
    </style>
</head>
<body>

<div class="container">
    <div class="sticky-header">
        <h2>FF9 固有コマンドの名前いえるかな</h2>
        <div class="limit-gauge-outer" id="gaugeWrapper">
            <div class="limit-label" id="progressPercent">0%</div> 
            <div class="limit-gauge-bg">
                <div id="limitFill"></div>
            </div>
        </div>
        <div class="status">残りの特殊技: <span id="remaining">--</span> / <span id="total">--</span></div>
        <div id="message"></div>
        <input type="text" id="answerInput" placeholder="技名を入力..." autofocus autocomplete="off">
        <button class="btn giveup-btn" id="giveupBtn">ギブアップ</button>
        <button class="btn retry-btn" id="retryBtn" style="display:none;">リセット</button>
    </div>
    <div class="list" id="answerList"></div>
</div>

<script>
    // JS部分は以前のロジック（日本語ヒント版）をそのまま使用します
    const config = {
        placeholderNormal: "技名を入力してEnter",
        placeholderGameOver: "FINISH",
        storageKey: "quiz_save_" + document.title
    };

const quizData = [
        // ジタン
        { display: "とんずら", accept: ["とんずら"], hint: "ジタン" },
        { display: "みやぶる", accept: ["みやぶる"], hint: "ジタン" },
        { display: "あれはなんだ", accept: ["あれはなんだ"], hint: "ジタン" },
        { display: "刀魂放気", accept: ["刀魂放気", "とうこんほうき"], hint: "ジタン" },
        { display: "めいわくをかける", accept: ["めいわくをかける"], hint: "ジタン" },
        { display: "ライフデジョン", accept: ["ライフデジョン", "らいふでじょん"], hint: "ジタン" },
        { display: "リーチセブン", accept: ["リーチセブン", "りーちせぶん"], hint: "ジタン" },
        { display: "盗賊のあかし", accept: ["盗賊のあかし", "とうぞくのあかし"], hint: "ジタン" },
        { display: "フリーエナジー", accept: ["フリーエナジー", "ふりーえなじー"], hint: "ジタン" },
        { display: "タイダルフレイム", accept: ["タイダルフレイム", "たいだるふれいむ"], hint: "ジタン" },
        { display: "スクープアウト", accept: ["スクープアウト", "すくーぷあうと"], hint: "ジタン" },
        { display: "シフトブレイク", accept: ["シフトブレイク", "しふとぶれいく"], hint: "ジタン" },
        { display: "ストラサークル5", accept: ["ストラサークル5", "すとらさーくる5", "すとらさーくるふぁいぶ"], hint: "ジタン" },
        { display: "ミールツイスター", accept: ["ミールツイスター", "みーるついすたー"], hint: "ジタン" },
        { display: "ソリューション9", accept: ["ソリューション9", "そりゅーしょん9", "そりゅーしょんないん"], hint: "ジタン" },
        { display: "グランドリーサル", accept: ["グランドリーサル", "ぐらんどりーさる"], hint: "ジタン" },

        // スタイナー
        { display: "暗黒剣", accept: ["暗黒剣", "あんこくけん"], hint: "スタイナー" },
        { display: "サガク剣", accept: ["サガク剣", "さがくけん"], hint: "スタイナー" },
        { display: "いあいぬき", accept: ["いあいぬき"], hint: "スタイナー" },
        { display: "パワーブレイク", accept: ["パワーブレイク", "ぱわーぶれいく"], hint: "スタイナー" },
        { display: "アーマーブレイク", accept: ["アーマーブレイク", "あーまーぶれいく"], hint: "スタイナー" },
        { display: "メンタルブレイク", accept: ["メンタルブレイク", "めんたるぶれいく"], hint: "スタイナー" },
        { display: "マジックブレイク", accept: ["マジックブレイク", "まじっくぶれいく"], hint: "スタイナー" },
        { display: "突撃", accept: ["突撃", "とつげき"], hint: "スタイナー" },
        { display: "雷鳴剣", accept: ["雷鳴剣", "らいめいけん"], hint: "スタイナー" },
        { display: "ストックブレイク", accept: ["ストックブレイク", "すとっくぶれいく"], hint: "スタイナー" },
        { display: "クライムハザード", accept: ["クライムハザード", "くらいむはざーど"], hint: "スタイナー" },
        { display: "ショック", accept: ["ショック", "しょっく"], hint: "スタイナー" },
        { display: "ファイア剣", accept: ["ファイア剣", "ふぁいあけん"], hint: "スタイナー" },
        { display: "ファイラ剣", accept: ["ファイラ剣", "ふぁいらけん"], hint: "スタイナー" },
        { display: "ファイガ剣", accept: ["ファイガ剣", "ふぁいがけん"], hint: "スタイナー" },
        { display: "ブリザド剣", accept: ["ブリザド剣", "ぶりざどけん"], hint: "スタイナー" },
        { display: "ブリザラ剣", accept: ["ブリザラ剣", "ぶりざらけん"], hint: "スタイナー" },
        { display: "ブリザガ剣", accept: ["ブリザガ剣", "ぶりざがけん"], hint: "スタイナー" },
        { display: "サンダー剣", accept: ["サンダー剣", "さんだーけん"], hint: "スタイナー" },
        { display: "サンダラ剣", accept: ["サンダラ剣", "さんだらけん"], hint: "スタイナー" },
        { display: "サンダガ剣", accept: ["サンダガ剣", "さんだがけん"], hint: "スタイナー" },
        { display: "バイオ剣", accept: ["バイオ剣", "ばいおけん"], hint: "スタイナー" },
        { display: "ウォータ剣", accept: ["ウォータ剣", "うぉーたけん"], hint: "スタイナー" },
        { display: "フレア剣", accept: ["フレア剣", "ふれあけん"], hint: "スタイナー" },
        { display: "ジハード剣", accept: ["ジハード剣", "じはーどけん"], hint: "スタイナー" },

        // フライヤ
        { display: "竜剣", accept: ["竜剣", "りゅうけん"], hint: "フライヤ" },
        { display: "レーゼの風", accept: ["レーゼの風", "れーぜのかぜ"], hint: "フライヤ" },
        { display: "ドラゴンブレス", accept: ["ドラゴンブレス", "どらごんぶれす"], hint: "フライヤ" },
        { display: "ホワイトドロー", accept: ["ホワイトドロー", "ほわいとどろー"], hint: "フライヤ" },
        { display: "ルナ", accept: ["ルナ", "るな"], hint: "フライヤ" },
        { display: "六竜", accept: ["六竜", "ろくりゅう"], hint: "フライヤ" },
        { display: "桜華狂咲", accept: ["桜華狂咲", "おうかきょうしょう"], hint: "フライヤ" },
        { display: "竜の紋章", accept: ["竜の紋章", "りゅうのもんしょう"], hint: "フライヤ" },

        // サラマンダー
        { display: "チャクラ", accept: ["チャクラ", "ちゃくら"], hint: "サラマンダー" },
        { display: "ぜになげ", accept: ["ぜになげ"], hint: "サラマンダー" },
        { display: "雑魚ちらし", accept: ["雑魚ちらし", "ざこちらし"], hint: "サラマンダー" },
        { display: "オーラ", accept: ["オーラ", "おーら"], hint: "サラマンダー" },
        { display: "呪い", accept: ["呪い", "のろい"], hint: "サラマンダー" },
        { display: "蘇生", accept: ["蘇生", "そせい"], hint: "サラマンダー" },
        { display: "グラビデ拳", accept: ["グラビデ拳", "ぐらびでけん"], hint: "サラマンダー" },
        { display: "グラビガ拳", accept: ["グラビガ拳", "ぐらびがけん"], hint: "サラマンダー" },
        { display: "秘孔拳", accept: ["秘孔拳", "ひこうけん"], hint: "サラマンダー" },
    ];

    let foundCount = 0;
    let isGameOver = false;
    let answeredIndices = new Set();

    const input = document.getElementById('answerInput');
    const remainingText = document.getElementById('remaining');
    const totalText = document.getElementById('total');
    const listContainer = document.getElementById('answerList');
    const messageEl = document.getElementById('message');
    const giveupBtn = document.getElementById('giveupBtn');
    const retryBtn = document.getElementById('retryBtn');
    const limitFill = document.getElementById('limitFill');
    const gaugeWrapper = document.getElementById('gaugeWrapper');
    const percentDisplay = document.getElementById('progressPercent');

    function updateLimitGauge() {
        const percent = Math.floor((foundCount / quizData.length) * 100);
        if(limitFill) limitFill.style.width = percent + "%";
        if(percentDisplay) {
            percentDisplay.textContent = (foundCount === quizData.length) ? "TRANCE !!" : percent + "%";
        }
        if (foundCount === quizData.length && quizData.length > 0) {
            gaugeWrapper.classList.add('limit-max');
        } else {
            gaugeWrapper.classList.remove('limit-max');
        }
    }

    function init() {
        foundCount = 0;
        isGameOver = false;
        answeredIndices.clear();
        listContainer.innerHTML = '';
        input.disabled = false;
        input.value = '';
        input.placeholder = config.placeholderNormal;
        giveupBtn.style.display = 'inline-block';
        retryBtn.style.display = 'none';
        remainingText.textContent = quizData.length;
        totalText.textContent = quizData.length;
        messageEl.textContent = '';

        quizData.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = 'item';
            div.id = 'target-' + index;
            div.innerHTML = `<div class="hint-text">${item.hint}</div><div class="answer-text">？？？？</div>`;
            listContainer.appendChild(div);
        });

        loadProgress();
        updateLimitGauge();
    }

    function loadProgress() {
        const savedData = localStorage.getItem(config.storageKey);
        if (savedData) {
            const savedIndices = JSON.parse(savedData);
            savedIndices.forEach(index => {
                if (index < quizData.length) {
                    answeredIndices.add(index);
                    updateItemDisplay(index, true);
                    foundCount++;
                }
            });
            remainingText.textContent = quizData.length - foundCount;
            if (foundCount > 0) showMessage("続きから開始します", "#00bfa5");
            if (foundCount === quizData.length) finishGame("全問正解済みです！", "#ffeb3b");
        }
        updateLimitGauge();
    }

    function saveProgress() {
        localStorage.setItem(config.storageKey, JSON.stringify(Array.from(answeredIndices)));
    }

input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && !isGameOver) {
            const val = input.value.trim();
            if (val === "") return;
            let targetIndex = quizData.findIndex(item => item.accept.includes(val));

            if (targetIndex !== -1) {
                if (answeredIndices.has(targetIndex)) {
                    showMessage("回答済みです", "#b5a67c");
                    // すでに正解済みでも、その場所を教えてあげるためにスクロールさせる
                    document.getElementById('target-' + targetIndex).scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                } else {
                    answeredIndices.add(targetIndex);
                    updateItemDisplay(targetIndex, true); // ここでスクロールが実行されます
                    foundCount++;
                    remainingText.textContent = quizData.length - foundCount;
                    showMessage("正解！", "#ffeb3b");
                    saveProgress();
                    updateLimitGauge();
                    if (foundCount === quizData.length) finishGame("全問正解！おめでとう！", "#ffeb3b");
                }
            } else {
                showMessage("ミス！", "#ff5252");
            }
            input.value = '';
        }
    });

function updateItemDisplay(index, isCorrect) {
        const targetEl = document.getElementById('target-' + index);
        const data = quizData[index];
        targetEl.innerHTML = `
            <div class="hint-text">${data.hint}</div>
            <div class="answer-text">${data.display}</div>
        `;
        
        if (isCorrect) {
            targetEl.classList.add('found');
            // --- 追加: スクロール処理 ---
            targetEl.scrollIntoView({
                behavior: 'smooth', // 滑らかに動かす
                block: 'center'      // 画面の中央にくるように調整
            });
        } else {
            targetEl.classList.add('missed');
        }
    }

    giveupBtn.addEventListener('click', () => {
        quizData.forEach((item, index) => { if (!answeredIndices.has(index)) updateItemDisplay(index, false); });
        finishGame("GAME OVER", "#ffffff");
    });

    retryBtn.addEventListener('click', () => {
        if(confirm("進行状況をリセットしますか？")) { localStorage.removeItem(config.storageKey); init(); }
    });

    function finishGame(msg, color) {
        isGameOver = true;
        input.disabled = true;
        input.placeholder = config.placeholderGameOver;
        giveupBtn.style.display = 'none';
        retryBtn.style.display = 'inline-block';
        showMessage(msg, color);
        updateLimitGauge();
    }

    function showMessage(text, color) {
        messageEl.textContent = text;
        messageEl.style.color = color;
        if (!isGameOver) setTimeout(() => { if (messageEl.textContent === text) messageEl.textContent = ""; }, 1500);
    }

    init();
</script>

</body>
</html>